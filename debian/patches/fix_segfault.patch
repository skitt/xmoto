Index: xmoto-0.5.2/src/states/StateMainMenu.cpp
===================================================================
--- xmoto-0.5.2.orig/src/states/StateMainMenu.cpp	2009-08-05 07:46:06.000000000 -0400
+++ xmoto-0.5.2/src/states/StateMainMenu.cpp	2009-09-26 10:10:50.000000000 -0400
@@ -871,6 +871,7 @@
   int   v_nbDiffLevels    = 0;
   std::string v_level_name= "";
   xmDatabase* pDb = xmDatabase::instance("main");
+  char *tmpresult;
   
   if(v_window != NULL){
     delete v_window;
@@ -888,7 +889,8 @@
     pDb->read_DB_free(v_result);
     return;
   }
-  v_nbStarts        = atoi(pDb->getResult(v_result, 2, 0, 0));
+  tmpresult         =      pDb->getResult(v_result, 2, 0, 0);
+  v_nbStarts        =      tmpresult ? atoi(tmpresult) : 0;
   v_since           =      pDb->getResult(v_result, 2, 0, 1);  
   pDb->read_DB_free(v_result);
 
@@ -904,11 +906,16 @@
     pDb->read_DB_free(v_result);
     return;
   }
-  v_totalPlayedTime = atoi(pDb->getResult(v_result, 5, 0, 0));
-  v_nbPlayed        = atoi(pDb->getResult(v_result, 5, 0, 1));
-  v_nbDied          = atoi(pDb->getResult(v_result, 5, 0, 2));
-  v_nbCompleted     = atoi(pDb->getResult(v_result, 5, 0, 3));
-  v_nbRestarted     = atoi(pDb->getResult(v_result, 5, 0, 4));
+  tmpresult = pDb->getResult(v_result, 5, 0, 0);
+  v_totalPlayedTime = tmpresult ? atoi(tmpresult) : 0;
+  tmpresult = pDb->getResult(v_result, 5, 0, 1);
+  v_nbPlayed        = tmpresult ? atoi(tmpresult) : 0;
+  tmpresult = pDb->getResult(v_result, 5, 0, 2);
+  v_nbDied          = tmpresult ? atoi(tmpresult) : 0;
+  tmpresult = pDb->getResult(v_result, 5, 0, 3);
+  v_nbCompleted     = tmpresult ? atoi(tmpresult) : 0;
+  tmpresult = pDb->getResult(v_result, 5, 0, 4);
+  v_nbRestarted     = tmpresult ? atoi(tmpresult) : 0;
   pDb->read_DB_free(v_result);
 
   v_result = pDb->readDB("SELECT COUNT(DISTINCT(id_level)) "
@@ -919,7 +926,8 @@
     pDb->read_DB_free(v_result);
     return;
   }  
-  v_nbDiffLevels = atoi(pDb->getResult(v_result, 1, 0, 0));
+  tmpresult         = pDb->getResult(v_result, 1, 0, 0);
+  v_nbDiffLevels    = tmpresult ? atoi(tmpresult) : 0;
   pDb->read_DB_free(v_result);
 
   /* Per-player info */
@@ -971,11 +979,16 @@
     if(cy + 45 > nHeight) break; /* out of window */
     
     v_level_name      =      pDb->getResult(v_result, 6, i, 0);
-    v_totalPlayedTime = atoi(pDb->getResult(v_result, 6, i, 5));
-    v_nbDied          = atoi(pDb->getResult(v_result, 6, i, 2));
-    v_nbPlayed        = atoi(pDb->getResult(v_result, 6, i, 1));
-    v_nbCompleted     = atoi(pDb->getResult(v_result, 6, i, 3));
-    v_nbRestarted     = atoi(pDb->getResult(v_result, 6, i, 4));
+    tmpresult = pDb->getResult(v_result, 6, i, 5);
+    v_totalPlayedTime = tmpresult ? atoi(tmpresult) : 0;
+    tmpresult = pDb->getResult(v_result, 6, i, 2);
+    v_nbDied          = tmpresult ? atoi(tmpresult) : 0;
+    tmpresult = pDb->getResult(v_result, 6, i, 1);
+    v_nbPlayed        = tmpresult ? atoi(tmpresult) : 0;
+    tmpresult = pDb->getResult(v_result, 6, i, 3);
+    v_nbCompleted     = tmpresult ? atoi(tmpresult) : 0;
+    tmpresult = pDb->getResult(v_result, 6, i, 4);
+    v_nbRestarted     = tmpresult ? atoi(tmpresult) : 0;
     
     snprintf(cBuf, 512, ("[%s] %s:\n   " + std::string(GAMETEXT_XMOTOLEVELSTATS_PLAYS(v_nbPlayed)       + std::string(", ") +
 						       GAMETEXT_XMOTOLEVELSTATS_DEATHS(v_nbDied)        + std::string(", ") +
